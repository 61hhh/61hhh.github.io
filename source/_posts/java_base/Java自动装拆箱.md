---
title: Javaè‡ªåŠ¨è£…æ‹†ç®±
tags: JavaåŸºç¡€
categories: Java
abbrlink: d443007a
date: 2020-11-09 15:46:42
---

## 1ã€åŸºæœ¬æ•°æ®ç±»å‹

Javaæœ‰å››ç§å…«ç±»åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–å…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡å³å¼•ç”¨ç±»å‹ã€‚JDK1.5åä¸ºåŸºæœ¬æ•°æ®ç±»å‹å¼•å…¥äº†å¯¹åº”çš„åŒ…è£…ç±»

**1.1 åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥åˆ†ä¸ºï¼š**

- æ•´æ•°ç±»å‹ï¼šbyteã€shortã€intã€long
- æµ®ç‚¹æ•°å‹ï¼šfloatã€double
- å­—ç¬¦ç±»å‹ï¼šchar
- å¸ƒå°”ç±»å‹ï¼šboolean

ã€æ³¨ã€‘Javaä¸­æ•°æ®ç±»å‹ä¸å­˜åœ¨æ— ç¬¦å·çš„ï¼Œå³ä»–ä»¬çš„å–å€¼èŒƒå›´æ˜¯å›ºå®šçš„

<!--more-->

**1.2 ä¸ºä»€ä¹ˆintçš„èŒƒå›´æ˜¯[-2,147,483,648 , 2,147,483,647]ï¼Ÿ**

å…ˆè¯´ä¸€ä¸ªå­—èŠ‚`byte`çš„èŒƒå›´ï¼šä¸€ä¸ªå­—èŠ‚8ä½ï¼Œæœ€é«˜ä½è¡¨ç¤ºæ­£è´Ÿå·ï¼Œæ‰€ä»¥å®é™…æ˜¯**[10000000ï¼Œ01111111]**ã€‚å³**[-2<sup>^</sup>7ï¼Œ2<sup>^</sup>7-1]**

`int`ï¼šæ˜¯4å­—èŠ‚32ä½ï¼Œç„¶åæœ€é«˜ä½0ã€1è¡¨ç¤ºæ­£è´Ÿå·ï¼Œæ‰€ä»¥å®é™…æ˜¯31ä½æ•°æ®ï¼Œå³**[-2<sup>^31</sup>ï¼Œ2<sup>^31</sup>-1]**ã€‚æ‰€ä»¥å¾—åˆ°çš„ç»“æœæ˜¯**[-2,147,483,648 , 2,147,483,647]**ã€‚åŒç†å…¶ä»–çš„æ•°æ®ç±»å‹ä¹Ÿæ˜¯



**1.3 åŸºæœ¬æ•°æ®ç±»å‹çš„ä½œç”¨**ï¼š

åœ¨Javaä¸­newçš„å¯¹è±¡æ˜¯å­˜å‚¨åœ¨å †ä¸­çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨éƒ½æ˜¯é€šè¿‡æ ˆä¸­çš„å¼•ç”¨æ¥æ“ä½œï¼Œå¯¹äºè¿™ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹è¿˜è¦æ¯ä¸ªéƒ½å»newå°±å¾ˆéº»çƒ¦ä¸”æµªè´¹èµ„æºï¼Œæ‰€ä»¥Javaå’ŒC++ä¸€æ ·æä¾›è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒä»¬çš„å˜é‡ä¸ä¼šåœ¨å †ä¸Šåˆ›å»ºï¼Œè€Œæ˜¯ç›´æ¥åœ¨æ ˆå†…å­˜ä¸­å­˜å‚¨ï¼Œå› æ­¤æ›´åŠ é«˜æ•ˆã€‚



## 2ã€åŒ…è£…ç±»å‹

| æ•°æ®ç±»å‹ | é»˜è®¤å€¼         | å­˜å‚¨æ ¼å¼ | æ•°æ®èŒƒå›´                                                     | åŒ…è£…ç±»å‹  |
| -------- | -------------- | -------- | ------------------------------------------------------------ | --------- |
| short    | 0              | 2 ä¸ªå­—èŠ‚ | -32,768 åˆ° 32,767                                            | Short     |
| int      | 0              | 4 ä¸ªå­—èŠ‚ | -2,147,483,648 åˆ° 2,147,483,647                              | Integer   |
| byte     | 0              | 1 ä¸ªå­—èŠ‚ | -128 åˆ° 127                                                  | Byte      |
| char     | ç©º             | 2 ä¸ªå­—èŠ‚ | Unicode çš„å­—ç¬¦èŒƒå›´ï¼š`\u0000`ï¼ˆå³ä¸º 0ï¼‰åˆ° `\uffff`ï¼ˆå³ä¸º 65,535ï¼‰ | Character |
| long     | 0L æˆ– 0l       | 8 ä¸ªå­—èŠ‚ | -9,223,372,036,854,775,808 åˆ° 9,223,372,036,854,775,807      | Long      |
| float    | 0.0F æˆ– 0.0f   | 4 ä¸ªå­—èŠ‚ | 32 ä½ IEEEE-754 å•ç²¾åº¦èŒƒå›´                                   | Float     |
| double   | 0.0 æˆ– 0.0D(d) | 8 ä¸ªå­—èŠ‚ | 64 ä½ IEEE-754 åŒç²¾åº¦èŒƒå›´                                    | Double    |
| boolean  | false          | 1 ä½     | true æˆ– false                                                | Boolean   |

**2.1 è‡ªåŠ¨æ‹†ç®±ä¸è£…ç®±**

ç®€å•è¯´ï¼Œè£…ç®±å°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬åŒ–ä¸ºå¯¹åº”çš„åŒ…è£…ç±»ï¼Œæ‹†ç®±å°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…ç±»è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ã€‚

**2.2ä¸ºä»€ä¹ˆè¦è¿™æ ·åš**

- å› ä¸ºJavaæ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ä½¿ç”¨å¯¹è±¡è€Œä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€‚æ¯”å¦‚ï¼Œåœ¨é›†åˆç±»ä¸­ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•å°†int ã€doubleç­‰ç±»å‹æ”¾è¿›å»çš„ã€‚å› ä¸ºé›†åˆçš„å®¹å™¨è¦æ±‚å…ƒç´ æ˜¯Objectç±»å‹ã€‚
- ä¸ºæ³›å‹æä¾›æ”¯æŒã€‚å› ä¸ºæ³›å‹é»˜è®¤æ˜¯Objectç±»å‹
- æ›´å¤šçš„å±æ€§å’Œæ–¹æ³•ã€‚è®©åŸºæœ¬ç±»å‹æœ‰äº†å¯¹è±¡çš„ç‰¹æ€§ï¼Œä¸ºå…¶æ·»åŠ å±æ€§å’Œæ–¹æ³•ï¼Œä¸°å¯Œäº†åŸºæœ¬ç±»å‹çš„æ“ä½œ

**2.3 å®ç°åŸç†**

ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š

```java
public class autoboxing {
    public static void main(String[] args) {
        Integer totalPac = 100;
        int totalNum = totalPac;
    }
}
```

ç¼–è¯‘ä¹‹åï¼Œç”¨æŒ‡ä»¤`javap -c autoboxing`åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶å¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š

![image-20201109174638916](https://jihulab.com/Leslie61/imagelake/-/raw/main/pictures/2023/04/image-20201109174638916.png)

åœ¨æ‰§è¡Œä¸Šé¢çš„ä»£ç æ—¶ï¼Œç³»ç»Ÿå®é™…æ‰§è¡Œçš„æ“ä½œï¼š

```java
Integer totalPac = 100;
//å¯¹åº”ğŸ‘‡
Integer totalPac = Integer.valueOf(100);

int totalNum = totalPac;
//å¯¹åº”ğŸ‘‡
int totalNum = totalPac.intValue();
```

> è‡ªåŠ¨è£…ç®±é‡‡ç”¨çš„éƒ½æ˜¯valueOf()æ–¹æ³•å®ç°ï¼Œæ‹†ç®±éƒ½æ˜¯é€šè¿‡åŒ…è£…ç±»å¯¹è±¡çš„å¯¹åº”xxValue()æ–¹æ³•å®ç°
>
> å½“ç„¶ä¸åŒåŒ…è£…ç±»çš„æ–¹æ³•ä¼šæœ‰æ‰€ä¸åŒï¼Œå…¶ä¸­Integerã€Shortã€Byteã€Characterã€Longè¿™å‡ ä¸ªç±»çš„valueOfæ–¹æ³•çš„å®ç°æ˜¯ç±»ä¼¼çš„ï¼›Doubleã€Floatçš„valueOfæ–¹æ³•çš„å®ç°æ˜¯ç›´æ¥è¿”å›æ–°å»ºå¯¹è±¡ã€‚



- æŸ¥çœ‹`valueOf`æºç 

  æºç å¦‚ä¸‹ï¼š

  ```java
  public static Integer valueOf(int i) {
      if (i >= IntegerCache.low && i <= IntegerCache.high)
          return IntegerCache.cache[i + (-IntegerCache.low)];
      return new Integer(i);
  }
  
  
  ```

  å¯ä»¥æŠŠlowå’Œhighç†è§£ä¸ºIntegerçš„è¾¹ç•Œï¼šå¦‚æœ`i`å¤§äº127æˆ–å°äº-128å°±åˆ›å»ºä¸€ä¸ªIntegerå¯¹è±¡è¿”å›ï¼›å¦åˆ™å°±æ‰§è¡Œ`cache[i+ (-IntegerCache.low)]`ï¼›`cache`æ˜¯`IntegerCache`ç±»çš„ä¸€ä¸ªIntegerç±»å‹finalæ•°ç»„å¯¹è±¡ï¼Œå³`valueOf()`è¿”å›çš„éƒ½æ˜¯Integerå¯¹è±¡ã€‚æ‰€ä»¥è£…ç®±ä¼šåˆ›å»ºå¯¹åº”çš„å¯¹è±¡ï¼Œæ¶ˆè€—å†…å­˜ã€‚cacheç”¨äºç¼“å­˜ã€‚

- å†çœ‹`intValue`æºç 

  å°±æ˜¯è¿”å›Integerå¯¹è±¡çš„valueå±æ€§å€¼ã€‚ã€`Integer`å¯¹è±¡æœ‰å±æ€§ï¼š`private final int value;`ã€‘

  ```java
  public int intValue() {
      return value;
  }
  ```

- **cacheç¼“å­˜**

  å½“éœ€è¦è¿›è¡Œè‡ªåŠ¨è£…ç®±æ—¶ï¼Œåˆ›å»ºå¯¹è±¡ä¹‹å‰å…ˆä»`IntegerCache.cache`ä¸­å¯»æ‰¾ï¼Œå¦‚æœæ•°å­—åœ¨-128è‡³127ä¹‹é—´æ—¶ï¼Œä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœæ²¡æ‰¾åˆ°æ‰ä½¿ç”¨newæ–°å»ºå¯¹è±¡ã€‚

  æ‰€ä»¥å¦‚ä¸‹ä»£ç ï¼š

  ```java
  Integer num1 = 100;
  Integer num2 = 100;
  System.out.println(num1==num2);//true
  Integer num3 = 500;
  Integer num4 = 500;
  System.out.println(num3==num4);//false
  ```

  å…·ä½“ä»£ç å®ç°å¯ä»¥çœ‹æºç `IntegerCache`éƒ¨åˆ†



## 3ã€æ‹†è£…ç®±çš„åº”ç”¨åœºæ™¯

- **<1>æ•°æ®ç±»å‹çš„æ¯”è¾ƒ**

  ```java
  Integer num = 100;
  System.out.println(num==100? "yes!":"no!");
  ```

  å®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯`num.valueOf()`

- **<2>é›†åˆç±»ä¿å­˜åŸºæœ¬æ•°æ®ç±»å‹**

  åœ¨Javaä¸­é›†åˆç±»åªèƒ½æ¥æ”¶å¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬æ€»æ˜¯ç›´æ¥å¾€ArrayListä¸­ç›´æ¥addæ•´æ•°ï¼Œå› ä¸ºç³»ç»Ÿå·²ç»è‡ªåŠ¨ä¸ºæˆ‘ä»¬è½¬æ¢äº†

  ```java
  public class autoboxing {
      public static void main(String[] args) {
          ArrayList<Integer> list = new ArrayList<>();
          for(int i=0;i<5;++i){
              list.add(i);
          }
      }
  }
  ```

  ![image-20201109180630089](https://jihulab.com/Leslie61/imagelake/-/raw/main/pictures/2023/04/image-20201109180630089.png)

- **<3>åŒ…è£…ç±»çš„è¿ç®—**

  å¯¹äºåŒ…è£…ç±»ï¼Œæ¯”å¦‚ï¼š

  ```java
  Integer num1 = 10;
  Integer num2 = 15;
  System.out.println(num1+num2);
  ```

  Integerå¯¹è±¡æ˜¯ä¸èƒ½ç›´æ¥è¿ç®—çš„ï¼Œä½†æ˜¯è¿™æ ·è¿è¡Œä¹Ÿå¯ä»¥ï¼Œå› ä¸ºé»˜è®¤ä¼šå˜æˆ`num1.intValue() + num2.intValue()`

